<pu:WindowX x:Class="VPet.Plugin.VoiceprintRecognition.winSetting"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:pu="https://opensource.panuon.com/wpf-ui"
        mc:Ignorable="d"
        Title="声纹识别设置"
        Height="650" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{DynamicResource DARKPrimary}">

    <pu:WindowX.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DARKPrimaryText}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="{DynamicResource DARKPrimaryText}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </pu:WindowX.Resources>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <TextBlock Grid.Row="0" Text="声纹识别设置" FontSize="20" FontWeight="Bold" Margin="0,0,0,15"/>

        <!-- 设置内容 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- 基本设置 -->
                <GroupBox Header="基本设置" Margin="0,0,0,10"
                          BorderBrush="{DynamicResource DARKPrimaryDarker}"
                          Foreground="{DynamicResource DARKPrimaryText}">
                    <StackPanel Margin="10">
                        <CheckBox x:Name="CheckEnableVoiceInput" Content="启用语音输入" Margin="0,5"/>
                        <CheckBox x:Name="CheckEnableVoiceprint" Content="启用声纹验证" Margin="0,5"/>
                        <CheckBox x:Name="CheckRequireMatch" Content="要求声纹匹配（不匹配时拒绝输入）" Margin="0,5"/>
                    </StackPanel>
                </GroupBox>

                <!-- 声纹识别设置 -->
                <GroupBox Header="声纹识别" Margin="0,0,0,10"
                          BorderBrush="{DynamicResource DARKPrimaryDarker}"
                          Foreground="{DynamicResource DARKPrimaryText}">
                    <StackPanel Margin="10">
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="声纹模型:"/>
                            <TextBox x:Name="TextVoiceprintModel" Grid.Column="1"/>
                        </Grid>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="验证阈值:"/>
                            <Slider x:Name="SliderThreshold" Grid.Column="1"
                                    Minimum="-1" Maximum="1"
                                    TickFrequency="0.1" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock x:Name="TextThreshold" Grid.Column="2" Text="0.7"/>
                        </Grid>

                        <Separator Margin="0,10"/>

                        <TextBlock Text="已注册的声纹:" Margin="0,5"/>
                        <ListBox x:Name="ListVoiceprints" Height="80" Margin="0,5"/>

                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <Button x:Name="BtnRegisterVoiceprint" Content="注册新声纹" Margin="0,0,10,0" Padding="15,5"/>
                            <Button x:Name="BtnDeleteVoiceprint" Content="删除选中" Padding="15,5"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <!-- 语音转文字设置 -->
                <GroupBox Header="语音转文字" Margin="0,0,0,10"
                          BorderBrush="{DynamicResource DARKPrimaryDarker}"
                          Foreground="{DynamicResource DARKPrimaryText}">
                    <StackPanel Margin="10">
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Whisper模型:"/>
                            <TextBox x:Name="TextWhisperModel" Grid.Column="1"/>
                        </Grid>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="语言:"/>
                            <ComboBox x:Name="ComboLanguage" Grid.Column="1">
                                <ComboBoxItem Content="中文" Tag="zh"/>
                                <ComboBoxItem Content="English" Tag="en"/>
                                <ComboBoxItem Content="日本語" Tag="ja"/>
                                <ComboBoxItem Content="한국어" Tag="ko"/>
                                <ComboBoxItem Content="自动检测" Tag="auto"/>
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <!-- 音频设置 -->
                <GroupBox Header="音频设置" Margin="0,0,0,10"
                          BorderBrush="{DynamicResource DARKPrimaryDarker}"
                          Foreground="{DynamicResource DARKPrimaryText}">
                    <StackPanel Margin="10">
                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="输入设备:"/>
                            <ComboBox x:Name="ComboInputDevice" Grid.Column="1"/>
                        </Grid>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="采样率:"/>
                            <ComboBox x:Name="ComboSampleRate" Grid.Column="1">
                                <ComboBoxItem Content="16000 Hz" Tag="16000"/>
                                <ComboBoxItem Content="22050 Hz" Tag="22050"/>
                                <ComboBoxItem Content="44100 Hz" Tag="44100"/>
                                <ComboBoxItem Content="48000 Hz" Tag="48000"/>
                            </ComboBox>
                        </Grid>

                        <Button x:Name="BtnTestMic" Content="测试麦克风" Margin="0,10,0,0" Padding="15,5" HorizontalAlignment="Left"/>
                    </StackPanel>
                </GroupBox>

                <!-- 性能设置 -->
                <GroupBox Header="性能设置" Margin="0,0,0,10"
                          BorderBrush="{DynamicResource DARKPrimaryDarker}"
                          Foreground="{DynamicResource DARKPrimaryText}">
                    <StackPanel Margin="10">
                        <CheckBox x:Name="CheckUseGPU" Content="使用 GPU 加速（需要 CUDA/DirectML）" Margin="0,5"/>

                        <Grid Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="30"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="线程数:"/>
                            <Slider x:Name="SliderThreads" Grid.Column="1"
                                    Minimum="1" Maximum="16"
                                    TickFrequency="1" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock x:Name="TextThreads" Grid.Column="2" Text="4"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <!-- 调试设置 -->
                <GroupBox Header="调试" Margin="0,0,0,10"
                          BorderBrush="{DynamicResource DARKPrimaryDarker}"
                          Foreground="{DynamicResource DARKPrimaryText}">
                    <StackPanel Margin="10">
                        <CheckBox x:Name="CheckDebugMode" Content="调试模式" Margin="0,5"/>
                        <CheckBox x:Name="CheckSaveRecordings" Content="保存录音文件（用于调试）" Margin="0,5"/>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- 底部按钮 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button x:Name="BtnSave" Content="保存" Padding="20,8" Margin="0,0,10,0"/>
            <Button x:Name="BtnCancel" Content="取消" Padding="20,8"/>
        </StackPanel>
    </Grid>
</pu:WindowX>
